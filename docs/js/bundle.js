
var Cart;Cart={attrs:{buttons:'.product__btn',quantity:'.cart__quantity',currency:'ла'},widget:{},init:function(){console.log('autoload init');$(document).on('click',Cart.attrs.buttons,function(e){console.log('product__btn click');var $order=$(this).closest('.product__order');var product_id=$order.data('product');if(product_id!=undefined&&product_id){console.log('product_id: '+product_id);$(this).addClass('product__btn--hide');$(this).siblings('.product__spinner').addClass('product__spinner--active');Cart.addProduct(product_id);}});},addProduct:function(product_id){e.preventDefault();var cart_data=Cart.getStorage()||{};if(cart_data.hasOwnProperty(product_id)){cart_data[product_id].count++;}else{product.count=1;cart_data[product_id]=product;}
Cart.setStorage(cart_data);return false;},deleteProduct:function(product_id){var cart_data=Cart.getStorage();delete cart_data[product_id];Cart.setStorage(product_id);Cart.widget.refresh();return false;},updateProduct:function(e){var product=$(this).data();var amount=1;cart_data=Cart.getStorage();cart_data[product.id].count+=amount;if(cart_data[product.id].count<1){cart_data[product.id].count=1;}
Cart.setStorage(cart_data);Cart.refresh();return false;},refresh:function(){},initWidget:function(e){console.log('widget.init');},refreshWidget:function(e){console.log('widget.refresh');},setStorage:function(o){localStorage.setItem('pxcart',JSON.stringify(o));return false;},getStorage:function(){return JSON.parse(localStorage.getItem('pxcart'));}};$(function(){console.log('init');var slideoutBtn=document.querySelector('.navbar-toggler');var slideout=new Slideout({'panel':document.getElementById('panel'),'menu':document.getElementById('navbar'),'padding':250,'tolerance':70,'side':'right','tolerance':70,'touch':false});slideoutBtn.addEventListener('click',function(){slideout.toggle();});$('.scroll-to-target').click(function(e){console.log('scroll-to-target');var target=$(this).attr('href');var offset=100;if($(this).data('offset')!=undefined)offset=$(this).data('offset');$('.nav').removeClass('nav--active');$.scrollTo(target,600,{offset:-offset});return false;});$('.gallery').slick({dots:true,slidesPerRow:3,slidesToScroll:1,rows:2,responsive:[{breakpoint:478,settings:{slidesPerRow:1,rows:1,dots:false}}]});$('body').delegate('*[data-event="popup"]','click',function(e){console.log('popup event');var popup=$(this).data('popup');if(popup){$('body').addClass('body--noscroll');$('#'+popup).addClass('popup--active');}
return false;});$('body').delegate('.popup__close','click',function(e){var $popup=$(this).closest('.popup');$('body').removeClass('body--noscroll');$popup.removeClass('popup--active');if($(this).hasClass('popup__close--remove')){$popup.remove();}
return false;});$(document).on('click','.spinner__button',function(e){console.log('.spinner__button');var $spinner=$(this).closest('.spinner');var $target=$spinner.find('.spinner__input');var $placeholder=$spinner.find('.spinner__placeholder');console.log($target);var change=1,min=1,max=200,uom='';if($target.data('change')!=undefined)change=parseInt($target.data('change'));if($target.data('min')!=undefined)min=parseInt($target.data('min'));if($target.data('max')!=undefined)max=parseInt($target.data('max'));if($target.data('uom')!=undefined)uom=$target.data('uom');var val;if($(this).hasClass('spinner__button--up')){val=parseInt($target.val())+change;}else{val=parseInt($target.val())-change;}
if(val<min)val=min;if(val>max)val=max;$target.val(val);$target.trigger('change');$placeholder.html(val+' '+uom);console.log(val+' '+uom);return false;});});